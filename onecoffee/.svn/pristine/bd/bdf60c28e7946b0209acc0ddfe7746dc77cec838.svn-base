package order_sol;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class Orderdao {

public List<Beverage> getBevList(Beverage sch) {
	// 메뉴 선택 메서드
	List<Beverage> bevList = new ArrayList<Beverage>();
	String sql = "SELECT * FROM BEVERAGE WHERE (kind=?) OR (TYPE=?) or (name LIKE ?)";
	// 기본값 0인경우 전체 검색이 필요하기에 0면 검색조건에서 제외
	// sql 문과 pstmt에 처리..
	
	try (Connection con = DBCon.con(); PreparedStatement pstmt = con.prepareStatement(sql);) {
		// 처리코드1
		pstmt.setString(1, sch.getKind());
		pstmt.setString(2, sch.getType());
		pstmt.setString(3, "%"+sch.getName()+"%");

		try (ResultSet rs = pstmt.executeQuery();) {
			// 처리코드2
			while (rs.next()) {
				bevList.add(new Beverage(
						rs.getInt("no"),
						rs.getString("kind"),
						rs.getString("type"),
						rs.getString("name"),
						rs.getInt("price")
						));
			}
			System.out.println("건수:" + bevList.size());
		}
	} catch (SQLException e) {
		System.out.println("DB 에러:" + e.getMessage());
	} catch (Exception e) {
		System.out.println("일반 에러:" + e.getMessage());
	}

	return bevList;
}

	// 장바구니 추가 메서드

	// 결제 추가 메서드 


	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
